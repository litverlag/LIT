<!-- This template has to be rendered with the desired departement as a parameter. The parameter should be called department -->



<!-- all related status models -->
<% @stat = ["statusbildpr", "statusbinderei", "statusdruck", "statusfinal", "statusoffsch",
             "statuspreps", "statusrg", "statussatz", "statustitelei", "statusumschl"] %>

<% @stat.each do |stat| %>
    <% if InputSettings.instance.is_visible?(@department, stat) %>
        <%= status_bar(@projekt, @projekt.send("#{stat}").status , (I18n.t stat)) %>
    <% end %>
<% end %>
    
<% @gprodsAtt = InputSettings.instance.all("gprods") %>
<% @buchAtt = InputSettings.instance.all("buecher") %>


<div class="panel">
<% used_url = admin_preps_path(@projekt.id)%>
<fieldset class="projekt"><legend><span><%= "#{@projekt.projektname} bearbeiten"%></span></legend>
	<%= form_for @projekt, url: used_url, remote: true do |projekt_form| %>
	<ul>
        <% @gprodsAtt.each do |field| %>
          <% if InputSettings.instance.is_visible?(@department, field)%>
            <% @fieldType = InputSettings.instance.which_type(field)%>
            <% case @fieldType%>
          	<% when "string"%>
            	<li>
            	  <%= projekt_form.label field, (I18n.t field) %>
              	  <%= projekt_form.text_field field %>
            	</li>
          	<% when "text"%>
             	<li>
            	  <%= projekt_form.label field, (I18n.t field) %>
              	  <%= projekt_form.text_area field, size: "10x10"  %>
            	</li>
            <% when "date"%>
            	<li>
            	  <%= projekt_form.label field, (I18n.t field) %>
	              <input class="datepicker" data-date-format="mm/dd/yyyy" name="gprod[<%=field%>]" value="<%=@projekt.send("#{field}") %>">
            	</li>
            <% when "integer", "float", "decimal"%>
            	<li>
            	  <%= projekt_form.label field, (I18n.t field) %>
	              <input value="<%=@projekt.send("#{field}") %>" name="gprods[<%=field%>]" type="number">
            	</li>
            <% when "boolean"%>
            	<li>
            	  <%= projekt_form.label field, (I18n.t field) %>
                  <input type="checkbox" name="gprods[<%=field%>]" value="True"><%=(I18n.t field)%>
            	</li>	
            <% else %>
            	<li>
            	  <%= projekt_form.label field, (I18n.t field) %>
              	  <!-- hardcoding for the choosable options - we need an if for each hardcoding case (so maybe another switch case inside the switch case?) -->
            	</li>
            <%end%>
          <%end%>
        <%end%>
    </ul>

	<ul>
		<%= projekt_form.fields_for :buecher do |buecher_form|%>
		
        <% @buchAtt.each do |field| %>
          <% if InputSettings.instance.is_visible?(@department, field)%>
            <% @fieldType = InputSettings.instance.which_type(field)%>
            <% case @fieldType%>
          	<% when "string"%>
            	<li>
            	  <%= buecher_form.label field, (I18n.t field) %>
              	  <%= buecher_form.text_field field %>
            	</li>
          	<% when "text"%>
             	<li>
            	  <%= buecher_form.label field, (I18n.t field) %>
              	  <%= buecher_form.text_area  field, size: "10x10"  %>
            	</li>
            <% when "date"%>
            	<li>
            	  <%= buecher_form.label field, (I18n.t field) %>
	              <input class="datepicker" data-date-format="mm/dd/yyyy" name="buecher[<%=field%>]" value="<%=@projekt.send("#{field}") %>">
            	</li>
            <% when "integer", "float", "decimal"%>
            	<li>
            	  <%= buecher_form.label field, (I18n.t field) %>
	              <input value="<%=@projekt.buch.send("#{field}") %>" name="buch[<%=field%>]" id=field type="number">
            	</li>
            <% when "boolean"%>
            	<li>
            	  <%= buecher_form.label field, (I18n.t field) %>
                  <input type="checkbox" name="buecher[<%=field%>]" value="True"><%=(I18n.t field)%>
            	</li>	
            <% else %>
            	<li>
            	  <%= buecher_form.label field, (I18n.t field) %>
              	  <!-- hardcoding for the choosable options - we need an if for each hardcoding case (so maybe another switch case inside the switch case?) -->
            	</li>
            <%end%>
          <%end%>
        <%end%>
        <%end%>
    </ul>
        
    <%= projekt_form.submit "#{@projekt.projektname} bearbeiten" %>
    <%end%>
</fieldset>
